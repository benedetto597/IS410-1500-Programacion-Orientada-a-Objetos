<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mini-Mall | Empresa</title>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
    <link rel="stylesheet" href="css/estilos.css">
    <link rel="shortcut icon" href="img/icon/MiniMallicon.png">
    <style>
    
        /* Background Main Window*/
        main{
            width:auto;
            height:100vh;
            background-image: url(img/register-client.jpeg);
            background-repeat: no-repeat;
            background-size:cover;
            background-position:inherit;
        }

        #map {
            width: 100%;
            height: 80%;
        }

        </style>
</head>
<body>
    <main>
        <!-- Barra de Navegación -->
        <nav class="navbar navbar-expand-lg navbar-dark ">
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon" ></span>
            </button>
            
            <div class="collapse navbar-collapse row" id="navbarSupportedContent">
                <ul id="main-navbar" class="nav navbar-nav mr-auto px-5">
                    <li class="nav-item invisible">
                        <a class="nav-link" href="#"><h6 id="white-text">Iniciar Sesión</h6></a>
                    </li>
                    <li class="nav-item invisible">
                        <a class="nav-link" href="#"><h6 id="white-text">Registrarse</h6></a>
                    </li>
                </ul>       
                <a class="navbar-brand" href="#"><img id="Mini-Mall-mainloogo" class="img-responsive" src="img/icon/MiniMall.png"></a>
                <ul id="main-navbar" class="nav navbar-nav ml-auto px-5">
                    <li class="nav-item invisible ">
                        <a class="nav-link" href="#"><h6 id="white-text">Iniciar Sesión Iniciar Inic</h6></a>
                    </li>
                    <li class="nav-item invisible">
                        <a class="nav-link" href="#"><h6 id="white-text">Carrito</h6></a>
                    </li>
                </ul>
            
        
            <div class="w-100">
                
                    <ul id="main-navbar" class="nav navbar-nav px-5">
                        <li class="nav-item mr-auto">
                            <a class="nav-link" href="index.html"><h6 class="text-white">Inicio</h6></a>
                       </li>
                        <li class="nav-item mr-auto ml-auto">
                            <a class="nav-link" href="#"><h6 class="text-white">Promociones</h6></a>
                        </li>
                        <li class="nav-item ml-auto">
                            <a class="nav-link" href="#"><h6 class="text-white">Contactanos</h6></a>
                        </li>
                    </ul>
                
            </div>
        </div>
        </nav>

        <div id="map"></div>
        <!-- Formulario de Registro 
        <form action="">
            <div class="col-8 mr-auto ml-auto p-3" id="form-client">
                <div class="form-row align-items-center">
                    <div class="col-auto mr-auto ml-auto">
                        <h4>Cliente</h4>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group col-md-6">
                        <b>Nombre Completo</b>
                        <input type="text" class="form-control my-1" id="first-name-client" placeholder="Nombres">
                        <input type="text" class="form-control" id="last-name-client" placeholder="Apellidos">
                    </div>
                    
                    <div class="form-group col-md-6">
                        <b>País</b>
                        <select id="country-select" class="form-control text-white">
                            <option>Honduras</option>
                            <option>Estados Unidos</option>
                        </select>
                        <select id="currency-select" class="form-control text-white">
                            <option>L Lempira</option>
                            <option>$ Dolar</option>
                        </select>
                    </div>

                    <div class="form-group col-md-6">
                        <b>Usuario</b>
                        <input type="text" class="form-control my-1" id="first-name-client" placeholder="Nombres">
                        <input type="text" class="form-control" id="last-name-client" placeholder="Apellidos">
                      </div>

                    <div class="form-group col-md-6">
                       <b>Contraseña</b>
                      <input type="password" class="form-control my-1" id="password-client" placeholder="Contraseña">
                      <input type="password" class="form-control" id="password-client-repeat" placeholder="Repita Contraseña">
                    </div>
                </div>

                <div class="form-row align-items-center">
                    <div class="col-auto mr-auto ml-auto">
                        <div class="form-group">
                            
                          </div>
                          <button type="submit" id="btn-client-register" class="btn btn-lg shadow p-2 px-5 mb-0 bg-white rounded-pill">Registrarse</button>
                          <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="gridCheck">
                            <label class="form-check-label" for="gridCheck">
                              Recuerdame
                            </label>
                          </div>
                    </div>
                </div>
                
            </div>
        </form>
        -->
        
    </main>

    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="js/bootstrap.min.js"></script>
    <script>
        var marker;          //Variable del marcador
var coords = {};    //Coordenadas obtenidas con la geolocalización

//Funcion principal
initMap = function () 
{

    //API para geolocalizar el usuario
        navigator.geolocation.getCurrentPosition(
          function (position){
            coords =  {
              lng: position.coords.longitude,
              lat: position.coords.latitude
            };
            setMapa(coords);  //pasamos las coordenadas al metodo para crear el mapa
           
          },function(error){switch(error.code){
				case error.PERMISSION_DENIED:
					mensajeError = "Permiso denegado por el usuario."
					break;
				case error.POSITION_UNAVAILABLE:
					mensajeError = "Posici\363n no disponible."+" "+error.message;
					break;
				case error.TIMEOUT:
					mensajeError = "Desconexi\363n por tiempo."
					break;
				case error.UNKNOWN_ERROR:
					mensajeError = "Error desconocido."+" "+error.message;
					break;
		}console.log(mensajeError);});
    
}

function setMapa (coords)
{   
      //Se crea una nueva instancia del objeto mapa
      var map = new google.maps.Map(document.getElementById('map'),
      {
        zoom: 13,
        center:new google.maps.LatLng(coords.lat,coords.lng),

      });

      /*Creamos el marcador en el mapa con sus propiedades
      para nuestro obetivo tenemos que poner el atributo draggable en true
      position pondremos las mismas coordenas que obtuvimos en la geolocalización*/
      marker = new google.maps.Marker({
        map: map,
        draggable: true,
        animation: google.maps.Animation.DROP,
        position: new google.maps.LatLng(coords.lat,coords.lng),

      });
      //agregamos un evento al marcador junto con la funcion callback al igual que el evento dragend que indica 
      //cuando el usuario a soltado el marcador
      marker.addListener('click', toggleBounce);
      
      marker.addListener( 'dragend', function (event)
      {
        //escribimos las coordenadas de la posicion actual del marcador dentro del input #coords
        document.getElementById("coords").value = this.getPosition().lat()+","+ this.getPosition().lng();
      });
}

//callback al hacer clic en el marcador lo que hace es quitar y poner la animacion BOUNCE
function toggleBounce() {
  if (marker.getAnimation() !== null) {
    marker.setAnimation(null);
  } else {
    marker.setAnimation(google.maps.Animation.BOUNCE);
  }
}

    </script>
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDHbIQpttJ5KwhJntjUa1aAKOTmuXIZRZ8&callback=initMap"></script>
    <script src="js/controlador.js"></script>
</body>
</html>